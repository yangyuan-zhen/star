{"version":3,"names":["TodoList","MyPopup","currentDate","common_vendor","ref","Date","temperature","weatherText","city","showTodoList","hasShown","popupVisible","customSettings","workStartTime","workEndTime","selectedWorkDays","currentTime","formatDate","computed","date","value","concat","getFullYear","getMonth","getDate","formatTime","hours","String","getHours","padStart","minutes","getMinutes","seconds","getSeconds","getWeatherData","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","locationId","res","wrap","_callee$","_context","prev","next","api_search","getQWeather","sent","now","temp","text","t0","index","__f__","showToast","title","icon","duration","stop","_x","apply","arguments","getLocation","cachedLocation","getStorageSync","cacheTime","CACHE_DURATION","name","id","Promise","resolve","reject","authorize","scope","success","type","_success","_callee2","cityData","_callee2$","_context2","getLocationId","longitude","latitude","_x2","fail","err","showModal","content","confirm","openSetting","init","_ref2","_callee3","_callee3$","_context3","resetAnimation","setTimeout","onShow","onTabItemTap","showPopup","hideCustomDialog","toggleWorkDay","dayIndex","indexOf","push","splice","sort","a","b","onWorkStartTimeChange","e","detail","onWorkEndTimeChange","saveCustomSettings","settings","workDays","setStorageSync","getStatusText","isWorkday","isBeforeWork","isAfterWork","today","getDay","includes","getTodayWorkTime","_customSettings$value","split","_customSettings$value2","_slicedToArray2","startHour","startMinute","_customSettings$value3","_customSettings$value4","endHour","endMinute","setHours","_getTodayWorkTime","_getTodayWorkTime2","updateCurrentTime","requestAnimationFrame","formatCountdown","ms","Math","floor","milliseconds","countdownText","_getTodayWorkTime3","onMounted","savedSettings","onUnmounted","wx","createPage","_sfc_main"],"sources":["index.vue","cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <!-- 顶部信息栏 -->\r\n    <view class=\"header\" @tap=\"showPopup\">\r\n      <view class=\"date-time\">\r\n        <text class=\"date\">{{ formatDate }}</text>\r\n        <text class=\"time\">{{ formatTime }}</text>\r\n      </view>\r\n      <view class=\"weather\">\r\n        <image src=\"/static/home/定位.svg\" class=\"location-icon\"></image>\r\n        <text>{{ city }}</text>\r\n        <text>{{ temperature }}°C {{ weatherText }}</text>\r\n      </view>\r\n    </view>\r\n    <!-- 中间状态显示 -->\r\n    <view class=\"status-container\">\r\n      <text class=\"status-text\">{{ getStatusText }}</text>\r\n      <text class=\"status-result\">{{ countdownText }}</text>\r\n    </view>\r\n    <!-- 待办事项 -->\r\n    <view\r\n      class=\"todo-list-container\"\r\n      :class=\"{ show: showTodoList, init: !hasShown }\"\r\n    >\r\n      <TodoList />\r\n    </view>\r\n\r\n    <!-- 添加弹窗组件 -->\r\n    <my-popup v-model:show=\"popupVisible\">\r\n      <view class=\"custom-dialog\">\r\n        <view class=\"dialog-header\">\r\n          <text class=\"dialog-title\">自定义设置</text>\r\n        </view>\r\n        <view class=\"dialog-content\">\r\n          <view class=\"input-group\">\r\n            <text class=\"label\">工作日</text>\r\n            <view class=\"weekday-selector\">\r\n              <view\r\n                v-for=\"(day, index) in [\r\n                  '周日',\r\n                  '周一',\r\n                  '周二',\r\n                  '周三',\r\n                  '周四',\r\n                  '周五',\r\n                  '周六',\r\n                ]\"\r\n                :key=\"index\"\r\n                class=\"weekday-item\"\r\n                :class=\"{ active: selectedWorkDays.includes(index) }\"\r\n                @tap=\"toggleWorkDay(index)\"\r\n              >\r\n                {{ day }}\r\n              </view>\r\n            </view>\r\n          </view>\r\n          <view class=\"input-group\">\r\n            <text class=\"label\">上班时间</text>\r\n            <picker\r\n              mode=\"time\"\r\n              :value=\"customSettings.workStartTime\"\r\n              @change=\"onWorkStartTimeChange\"\r\n              class=\"input\"\r\n            >\r\n              <view class=\"picker-value\">{{\r\n                customSettings.workStartTime\r\n              }}</view>\r\n            </picker>\r\n          </view>\r\n          <view class=\"input-group\">\r\n            <text class=\"label\">下班时间</text>\r\n            <picker\r\n              mode=\"time\"\r\n              :value=\"customSettings.workEndTime\"\r\n              @change=\"onWorkEndTimeChange\"\r\n              class=\"input\"\r\n            >\r\n              <view class=\"picker-value\">{{ customSettings.workEndTime }}</view>\r\n            </picker>\r\n          </view>\r\n        </view>\r\n        <view class=\"dialog-footer\">\r\n          <button class=\"btn cancel\" @tap=\"hideCustomDialog\">取消</button>\r\n          <button class=\"btn confirm\" @tap=\"saveCustomSettings\">确定</button>\r\n        </view>\r\n      </view>\r\n    </my-popup>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, onUnmounted } from \"vue\";\r\nimport { onShow, onTabItemTap } from \"@dcloudio/uni-app\";\r\nimport { getQWeather, getLocationId } from \"@/api/search.js\";\r\nimport TodoList from \"@/components/home/TodoList.vue\";\r\nimport MyPopup from \"@/components/my-popup/my-popup.vue\";\r\n\r\nconst currentDate = ref(new Date());\r\nconst temperature = ref(\"--\");\r\nconst weatherText = ref(\"未知\");\r\nconst city = ref(\"定位中...\");\r\nconst showTodoList = ref(false);\r\nconst hasShown = ref(false);\r\nconst popupVisible = ref(false);\r\n\r\n// 添加新的响应式变量\r\nconst customSettings = ref({\r\n  workStartTime: \"09:00\",\r\n  workEndTime: \"18:00\",\r\n});\r\n\r\nconst selectedWorkDays = ref([1, 2, 3, 4, 5]); // 默认周一到周五\r\n\r\n// 添加计算属性和响应式变量\r\nconst currentTime = ref(new Date());\r\nconst countdownTimer = ref(null);\r\n\r\n// 格式化日期\r\nconst formatDate = computed(() => {\r\n  const date = currentDate.value;\r\n  return `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`;\r\n});\r\n\r\n// 格式化时间\r\nconst formatTime = computed(() => {\r\n  const date = currentDate.value;\r\n  const hours = String(date.getHours()).padStart(2, \"0\");\r\n  const minutes = String(date.getMinutes()).padStart(2, \"0\");\r\n  const seconds = String(date.getSeconds()).padStart(2, \"0\");\r\n  return `${hours}:${minutes}:${seconds}`;\r\n});\r\n\r\n// 获取天气数据\r\nconst getWeatherData = async (locationId) => {\r\n  try {\r\n    const res = await getQWeather(locationId);\r\n    if (res && res.now) {\r\n      temperature.value = res.now.temp;\r\n      weatherText.value = res.now.text;\r\n    }\r\n  } catch (error) {\r\n    console.error(\"获取天气数据失败:\", error);\r\n    uni.showToast({\r\n      title: \"获取天气信息失败\",\r\n      icon: \"none\",\r\n      duration: 2000,\r\n    });\r\n  }\r\n};\r\n\r\n// 获取位置信息\r\nconst getLocation = () => {\r\n  // 先检查缓存\r\n  const cachedLocation = uni.getStorageSync(\"locationCache\");\r\n  const cacheTime = uni.getStorageSync(\"locationCache_time\");\r\n  const CACHE_DURATION = 5 * 60 * 1000; // 5分钟缓存\r\n\r\n  if (cachedLocation && cacheTime && Date.now() - cacheTime < CACHE_DURATION) {\r\n    city.value = cachedLocation.name;\r\n    return getWeatherData(cachedLocation.id);\r\n  }\r\n\r\n  return new Promise((resolve, reject) => {\r\n    // 先请求授权\r\n    uni.authorize({\r\n      scope: \"scope.userLocation\",\r\n      success: () => {\r\n        // 授权成功后获取位置\r\n        uni.getLocation({\r\n          type: \"wgs84\",\r\n          success: async (res) => {\r\n            try {\r\n              const cityData = await getLocationId(res.longitude, res.latitude);\r\n              city.value = cityData.name;\r\n              await getWeatherData(cityData.id);\r\n              resolve(cityData);\r\n            } catch (error) {\r\n              console.error(\"位置信息处理失败:\", error);\r\n              city.value = \"未知位置\";\r\n              await getWeatherData();\r\n              reject(error);\r\n            }\r\n          },\r\n          fail: (err) => {\r\n            console.error(\"获取位置失败:\", err);\r\n            city.value = \"未知位置\";\r\n            getWeatherData();\r\n            reject(err);\r\n          },\r\n        });\r\n      },\r\n      fail: (err) => {\r\n        console.error(\"位置授权失败:\", err);\r\n        // 如果是拒绝授权，显示打开设置的对话框\r\n        uni.showModal({\r\n          title: \"提示\",\r\n          content:\r\n            \"需要获取您的位置才能显示准确的天气信息，是否打开设置页面重新授权？\",\r\n          success: (res) => {\r\n            if (res.confirm) {\r\n              uni.openSetting();\r\n            }\r\n          },\r\n        });\r\n        city.value = \"未知位置\";\r\n        getWeatherData();\r\n        reject(err);\r\n      },\r\n    });\r\n  });\r\n};\r\n\r\n// 初始化函数\r\nconst init = async () => {\r\n  try {\r\n    await getLocation();\r\n  } catch (error) {\r\n    console.error(\"初始化位置或天气失败:\", error);\r\n  }\r\n};\r\n\r\n// 重置动画的函数\r\nconst resetAnimation = () => {\r\n  // 完全重置状态\r\n  hasShown.value = false;\r\n  showTodoList.value = false;\r\n\r\n  // 使用两个 setTimeout 来确保动画重置和触发\r\n  setTimeout(() => {\r\n    hasShown.value = true;\r\n    setTimeout(() => {\r\n      showTodoList.value = true;\r\n    }, 50);\r\n  }, 50);\r\n};\r\n\r\n// 当页面显示时\r\nonShow(() => {\r\n  resetAnimation();\r\n});\r\n\r\n// 当点击 tabbar 时\r\nonTabItemTap(() => {\r\n  resetAnimation();\r\n});\r\n\r\n// 修改 showPopup 方法\r\nconst showPopup = () => {\r\n  console.log(\"showPopup clicked\"); // 添加调试日志\r\n  popupVisible.value = true;\r\n};\r\n\r\n// 添加新的方法\r\nconst hideCustomDialog = () => {\r\n  popupVisible.value = false;\r\n};\r\n\r\nconst toggleWorkDay = (dayIndex) => {\r\n  const index = selectedWorkDays.value.indexOf(dayIndex);\r\n  if (index === -1) {\r\n    selectedWorkDays.value.push(dayIndex);\r\n  } else {\r\n    selectedWorkDays.value.splice(index, 1);\r\n  }\r\n  selectedWorkDays.value.sort((a, b) => a - b);\r\n};\r\n\r\nconst onWorkStartTimeChange = (e) => {\r\n  customSettings.value.workStartTime = e.detail.value;\r\n};\r\n\r\nconst onWorkEndTimeChange = (e) => {\r\n  customSettings.value.workEndTime = e.detail.value;\r\n};\r\n\r\nconst saveCustomSettings = () => {\r\n  const settings = {\r\n    workStartTime: customSettings.value.workStartTime,\r\n    workEndTime: customSettings.value.workEndTime,\r\n    workDays: selectedWorkDays.value,\r\n  };\r\n\r\n  uni.setStorageSync(\"customSettings\", settings);\r\n\r\n  uni.showToast({\r\n    title: \"设置已保存\",\r\n    icon: \"success\",\r\n  });\r\n\r\n  hideCustomDialog();\r\n};\r\n\r\n// 获取状态文本\r\nconst getStatusText = computed(() => {\r\n  if (!isWorkday.value) return \"今天休息\";\r\n  if (isBeforeWork.value) return \"距离上班还有\";\r\n  if (isAfterWork.value) return \"工作已结束\";\r\n  return \"距离下班还有\";\r\n});\r\n\r\n// 计算是否是工作日\r\nconst isWorkday = computed(() => {\r\n  const today = currentTime.value.getDay();\r\n  return selectedWorkDays.value.includes(today);\r\n});\r\n\r\n// 获取今天的上下班时间\r\nconst getTodayWorkTime = () => {\r\n  const today = new Date(currentTime.value);\r\n  const [startHour, startMinute] =\r\n    customSettings.value.workStartTime.split(\":\");\r\n  const [endHour, endMinute] = customSettings.value.workEndTime.split(\":\");\r\n\r\n  const workStartTime = new Date(today.setHours(startHour, startMinute, 0));\r\n  const workEndTime = new Date(today.setHours(endHour, endMinute, 0));\r\n\r\n  return {\r\n    workStartTime,\r\n    workEndTime,\r\n  };\r\n};\r\n\r\n// 计算是否在上班前\r\nconst isBeforeWork = computed(() => {\r\n  const { workStartTime } = getTodayWorkTime();\r\n  return currentTime.value < workStartTime;\r\n});\r\n\r\n// 计算是否在下班后\r\nconst isAfterWork = computed(() => {\r\n  const { workEndTime } = getTodayWorkTime();\r\n  return currentTime.value > workEndTime;\r\n});\r\n\r\n// 修改更新频率为毫秒级\r\nconst updateCurrentTime = () => {\r\n  currentTime.value = new Date();\r\n  // 使用 requestAnimationFrame 实现更流畅的更新\r\n  requestAnimationFrame(updateCurrentTime);\r\n};\r\n\r\n// 修改格式化倒计时函数，增加毫秒显示\r\nconst formatCountdown = (ms) => {\r\n  if (ms < 0) return \"00:00:00.000\";\r\n  const hours = Math.floor(ms / 3600000);\r\n  const minutes = Math.floor((ms % 3600000) / 60000);\r\n  const seconds = Math.floor((ms % 60000) / 1000);\r\n  const milliseconds = ms % 1000;\r\n\r\n  return `${String(hours).padStart(2, \"0\")}:${String(minutes).padStart(\r\n    2,\r\n    \"0\"\r\n  )}:${String(seconds).padStart(2, \"0\")}.${String(milliseconds).padStart(\r\n    3,\r\n    \"0\"\r\n  )}`;\r\n};\r\n\r\n// 倒计时文本\r\nconst countdownText = computed(() => {\r\n  if (!isWorkday.value) return \"享受假期!\";\r\n\r\n  const { workStartTime, workEndTime } = getTodayWorkTime();\r\n  const now = currentTime.value;\r\n\r\n  if (isBeforeWork.value) {\r\n    return formatCountdown(workStartTime - now);\r\n  } else if (isAfterWork.value) {\r\n    return \"工作已结束!\";\r\n  } else {\r\n    return formatCountdown(workEndTime - now);\r\n  }\r\n});\r\n\r\nonMounted(() => {\r\n  // 使用 requestAnimationFrame 替代 setInterval\r\n  updateCurrentTime();\r\n\r\n  // 获取位置和天气\r\n  init();\r\n\r\n  const savedSettings = uni.getStorageSync(\"customSettings\");\r\n  if (savedSettings) {\r\n    customSettings.value = {\r\n      workStartTime: savedSettings.workStartTime || \"09:00\",\r\n      workEndTime: savedSettings.workEndTime || \"18:00\",\r\n    };\r\n    selectedWorkDays.value = savedSettings.workDays || [1, 2, 3, 4, 5];\r\n  }\r\n});\r\n\r\n// 修改 onUnmounted，不再需要清理 interval\r\nonUnmounted(() => {\r\n  // 如果需要停止动画帧，可以使用变量控制 updateCurrentTime 中的 requestAnimationFrame\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.container {\r\n  padding: 20px;\r\n  background-color: $theme-color;\r\n  min-height: 100vh;\r\n  height: 100vh;\r\n  color: $text-color;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.date-time {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5px;\r\n}\r\n\r\n.date,\r\n.time {\r\n  font-size: 16px;\r\n  color: $brand-color;\r\n}\r\n\r\n.weather {\r\n  font-size: 16px;\r\n  display: flex;\r\n  align-items: center;\r\n  color: $brand-color;\r\n  gap: 4rpx;\r\n\r\n  .location-icon {\r\n    width: 36rpx;\r\n    height: 36rpx;\r\n    display: inline-block;\r\n    fill: $brand-color;\r\n    transition: fill 0.3s ease;\r\n\r\n    &:hover {\r\n      fill: darken($brand-color, 10%);\r\n    }\r\n  }\r\n\r\n  text {\r\n    line-height: 36rpx;\r\n  }\r\n}\r\n\r\n.status-container {\r\n  text-align: center;\r\n  margin: 30rpx 0;\r\n\r\n  .status-text {\r\n    font-size: 32rpx;\r\n    color: $text-color-secondary;\r\n    margin-bottom: 20rpx;\r\n  }\r\n\r\n  .status-result {\r\n    font-size: 48rpx;\r\n    font-weight: bold;\r\n    color: $brand-color;\r\n    font-family: \"Courier New\", Courier, monospace; // 使用更适合显示数字的等宽字体\r\n    letter-spacing: 1px; // 增加字符间距，提高可读性\r\n\r\n    // 添加毫秒的特殊样式\r\n    .milliseconds {\r\n      font-size: 32rpx; // 毫秒字体稍小\r\n      opacity: 0.8; // 略微降低不透明度\r\n    }\r\n  }\r\n}\r\n\r\n.todo-list-container {\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  height: 70vh;\r\n  transform: translateY(100%);\r\n  transition: transform 0.3s ease-out;\r\n  background-color: $theme-color;\r\n  border-radius: 32rpx 32rpx 0 0;\r\n  padding: 20px;\r\n  box-shadow: 0 -4rpx 16rpx rgba(0, 0, 0, 0.1);\r\n\r\n  &.init {\r\n    transition: none; // 初始状态不需要过渡动画\r\n  }\r\n\r\n  &.show {\r\n    transform: translateY(10%);\r\n  }\r\n}\r\n\r\n.custom-dialog {\r\n  background: #fff;\r\n  width: 600rpx;\r\n  border-radius: 24rpx;\r\n  overflow: hidden;\r\n\r\n  .dialog-header {\r\n    padding: 30rpx;\r\n    text-align: center;\r\n    border-bottom: 1rpx solid #eee;\r\n\r\n    .dialog-title {\r\n      font-size: 32rpx;\r\n      font-weight: 600;\r\n      color: #333;\r\n    }\r\n  }\r\n\r\n  .dialog-content {\r\n    padding: 30rpx;\r\n\r\n    .input-group {\r\n      margin-bottom: 20rpx;\r\n\r\n      .label {\r\n        font-size: 28rpx;\r\n        color: #666;\r\n        margin-bottom: 10rpx;\r\n        display: block;\r\n      }\r\n\r\n      .input {\r\n        width: 100%;\r\n        height: 80rpx;\r\n        border: 1rpx solid #eee;\r\n        border-radius: 12rpx;\r\n        padding: 0 20rpx;\r\n        font-size: 28rpx;\r\n      }\r\n    }\r\n  }\r\n\r\n  .dialog-footer {\r\n    display: flex;\r\n    border-top: 1rpx solid #eee;\r\n\r\n    .btn {\r\n      flex: 1;\r\n      height: 90rpx;\r\n      line-height: 90rpx;\r\n      text-align: center;\r\n      font-size: 32rpx;\r\n      border: none;\r\n      background: none;\r\n\r\n      &.cancel {\r\n        color: #666;\r\n        border-right: 1rpx solid #eee;\r\n      }\r\n\r\n      &.confirm {\r\n        color: #007aff;\r\n      }\r\n\r\n      &:active {\r\n        background-color: #f5f5f5;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.weekday-selector {\r\n  display: flex;\r\n  gap: 10rpx;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.weekday-item {\r\n  flex: 1;\r\n  height: 60rpx;\r\n  line-height: 60rpx;\r\n  text-align: center;\r\n  border-radius: 8rpx;\r\n  font-size: 24rpx;\r\n  background-color: #f5f5f5;\r\n  color: #666;\r\n  transition: all 0.3s ease;\r\n\r\n  &.active {\r\n    background-color: #007aff;\r\n    color: #fff;\r\n  }\r\n}\r\n\r\n.picker-value {\r\n  height: 80rpx;\r\n  line-height: 80rpx;\r\n  padding: 0 20rpx;\r\n}\r\n\r\n.input,\r\npicker {\r\n  width: 100%;\r\n  height: 80rpx;\r\n  border: 1rpx solid #eee;\r\n  border-radius: 12rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n// 添加数字跳动动画\r\n@keyframes numberPulse {\r\n  0% {\r\n    transform: scale(1);\r\n  }\r\n  50% {\r\n    transform: scale(1.05);\r\n  }\r\n  100% {\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n.number-animate {\r\n  animation: numberPulse 0.5s ease-in-out;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/por/cursor/xcx/freeyunpan/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}