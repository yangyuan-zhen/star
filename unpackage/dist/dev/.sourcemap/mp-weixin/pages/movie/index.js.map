{"version":3,"file":"index.js","sources":["pages/movie/index.vue","../../../../360极速浏览器下载/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbW92aWUvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <div class=\"movie-calendar\">\r\n    <div class=\"header-container\">\r\n      <div class=\"date-header\">\r\n        <view class=\"date-number\">{{ currentDay }}</view>\r\n        <view class=\"date-info\">\r\n          <text>{{ currentMonth + 1 }}月</text>\r\n          <text class=\"ml-2\">周{{ weekDayText }}</text>\r\n        </view>\r\n      </div>\r\n    </div>\r\n    <!-- 添加 loading 骨架屏 -->\r\n    <div v-if=\"isLoading\" class=\"movie-card skeleton\">\r\n      <view class=\"skeleton-poster\"></view>\r\n      <view class=\"skeleton-content\">\r\n        <view class=\"skeleton-title\"></view>\r\n        <view class=\"skeleton-tags\">\r\n          <view class=\"skeleton-tag\" v-for=\"i in 3\" :key=\"i\"></view>\r\n        </view>\r\n        <view class=\"skeleton-text\"></view>\r\n        <view class=\"skeleton-text\"></view>\r\n        <view class=\"skeleton-meta\"></view>\r\n      </view>\r\n    </div>\r\n    <!-- 今日电影卡片 -->\r\n    <div v-else-if=\"todayMovie\" class=\"movie-card\">\r\n      <image :src=\"todayMovie.mov_pic\" class=\"movie-poster\" mode=\"aspectFill\" />\r\n      <div class=\"movie-content\">\r\n        <view class=\"movie-title\">{{ todayMovie.mov_title }}</view>\r\n        <view class=\"movie-tags\">\r\n          <text class=\"tag rating\">{{ todayMovie.mov_rating }} 分</text>\r\n          <text class=\"tag year\">{{ todayMovie.mov_year }}</text>\r\n          <text\r\n            v-for=\"type in todayMovie.mov_type\"\r\n            :key=\"type\"\r\n            class=\"tag type\"\r\n          >\r\n            {{ type }}\r\n          </text>\r\n        </view>\r\n        <view class=\"movie-quote\">{{ todayMovie.mov_text }}</view>\r\n        <view class=\"movie-meta\">\r\n          <text>导演：{{ todayMovie.mov_director }} &nbsp</text>\r\n          <text class=\"ml-2\">地区：{{ todayMovie.mov_area }}</text>\r\n        </view>\r\n      </div>\r\n      <view class=\"source-info\" @longpress=\"copyLink\">\r\n        数据来源：此刻电影日历（长按复制链接）\r\n      </view>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from \"vue\";\r\nimport { getMovieData } from \"@/api/search.js\";\r\nimport { onShareAppMessage, onShareTimeline } from \"@dcloudio/uni-app\";\r\nconst currentDate = ref(new Date());\r\nconst weekDays = [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"];\r\n\r\nconst currentDay = computed(() => currentDate.value.getDate());\r\nconst currentMonth = computed(() => currentDate.value.getMonth());\r\nconst weekDayText = computed(() => weekDays[currentDate.value.getDay()]);\r\nconst todayMovie = ref(null);\r\nconst isLoading = ref(true);\r\n\r\n// 获取电影数据\r\nconst fetchMovieData = async () => {\r\n  isLoading.value = true;\r\n  try {\r\n    const data = await getMovieData();\r\n    todayMovie.value = data;\r\n  } catch (error) {\r\n    console.error(\"获取电影数据失败:\", error);\r\n    uni.showToast({\r\n      title: \"获取电影数据失败\",\r\n      icon: \"none\",\r\n    });\r\n  } finally {\r\n    isLoading.value = false;\r\n  }\r\n};\r\n\r\n// 添加复制链接功能\r\nconst copyLink = () => {\r\n  uni.setClipboardData({\r\n    data: \"https://www.cikeee.com\",\r\n    success: () => {\r\n      uni.showToast({\r\n        title: \"链接已复制\",\r\n        icon: \"success\",\r\n      });\r\n    },\r\n  });\r\n};\r\n\r\n// 分享给好友\r\nonShareAppMessage(() => {\r\n  return {\r\n    title: todayMovie.value?.mov_title || \"今日电影推荐\",\r\n    path: \"/pages/movie/index\",\r\n    imageUrl: todayMovie.value?.mov_pic, // 分享图片，使用电影海报\r\n  };\r\n});\r\n\r\n// 分享到朋友圈\r\nonShareTimeline(() => {\r\n  return {\r\n    title: todayMovie.value?.mov_title || \"今日电影推荐\",\r\n    query: \"/pages/movie/index\",\r\n    imageUrl: todayMovie.value?.mov_pic,\r\n  };\r\n});\r\n\r\nonMounted(() => {\r\n  fetchMovieData();\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.movie-calendar {\r\n  min-height: 100vh;\r\n  background: #f5f5f5;\r\n  padding: 20px;\r\n}\r\n\r\n.date-header {\r\n  margin-bottom: 1px;\r\n}\r\n\r\n.date-number {\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.date-info {\r\n  font-size: 16px;\r\n  color: #666;\r\n}\r\n\r\n.movie-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 10px;\r\n  margin-bottom: 20px;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.movie-poster {\r\n  width: 100%;\r\n  height: 900rpx;\r\n  border-radius: 8rpx;\r\n  margin-bottom: 16rpx;\r\n  object-fit: cover;\r\n}\r\n\r\n.movie-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  margin-bottom: 8px;\r\n  color: #333;\r\n}\r\n\r\n.movie-tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.tag {\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n}\r\n\r\n.rating {\r\n  background: #ffe1b3;\r\n  color: #ff9900;\r\n}\r\n\r\n.year {\r\n  background: #e8f3ff;\r\n  color: #2196f3;\r\n}\r\n\r\n.type {\r\n  background: #f0f0f0;\r\n  color: #666;\r\n}\r\n\r\n.movie-quote {\r\n  font-size: 14px;\r\n  color: #666;\r\n  line-height: 1.5;\r\n  margin: 12px 0;\r\n  font-style: italic;\r\n}\r\n\r\n.movie-meta {\r\n  font-size: 12px;\r\n  color: #999;\r\n}\r\n\r\n.calendar-nav {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.nav-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 8px 16px;\r\n  background: white;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n  color: #666;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.today-btn {\r\n  padding: 8px 20px;\r\n  background: #333;\r\n  color: white;\r\n  border-radius: 20px;\r\n  font-size: 14px;\r\n}\r\n\r\n.source-info {\r\n  margin-top: 20rpx;\r\n  padding-top: 20rpx;\r\n  border-top: 1px solid #eee;\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  text-align: center;\r\n}\r\n\r\n.header-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.history-icon {\r\n  width: 32px;\r\n  height: 32px;\r\n  padding: 10px;\r\n  opacity: 0.6;\r\n}\r\n\r\n.history-icon-hover {\r\n  opacity: 1;\r\n  transform: scale(1.1);\r\n  transition: transform 0.2s, opacity 0.2s;\r\n}\r\n\r\n// 添加骨架屏样式\r\n.skeleton {\r\n  .skeleton-poster {\r\n    width: 100%;\r\n    height: 900rpx;\r\n    background: #f0f0f0;\r\n    border-radius: 8rpx;\r\n    margin-bottom: 16rpx;\r\n  }\r\n\r\n  .skeleton-content {\r\n    padding: 10px;\r\n  }\r\n\r\n  .skeleton-title {\r\n    height: 24px;\r\n    background: #f0f0f0;\r\n    margin-bottom: 12px;\r\n    width: 60%;\r\n    border-radius: 4px;\r\n  }\r\n\r\n  .skeleton-tags {\r\n    display: flex;\r\n    gap: 8px;\r\n    margin-bottom: 12px;\r\n  }\r\n\r\n  .skeleton-tag {\r\n    width: 60px;\r\n    height: 20px;\r\n    background: #f0f0f0;\r\n    border-radius: 4px;\r\n  }\r\n\r\n  .skeleton-text {\r\n    height: 16px;\r\n    background: #f0f0f0;\r\n    margin-bottom: 8px;\r\n    border-radius: 4px;\r\n\r\n    &:nth-child(2) {\r\n      width: 90%;\r\n    }\r\n  }\r\n\r\n  .skeleton-meta {\r\n    height: 14px;\r\n    background: #f0f0f0;\r\n    width: 70%;\r\n    border-radius: 4px;\r\n  }\r\n\r\n  .skeleton-poster,\r\n  .skeleton-title,\r\n  .skeleton-tag,\r\n  .skeleton-text,\r\n  .skeleton-meta {\r\n    position: relative;\r\n    overflow: hidden;\r\n\r\n    &::after {\r\n      content: \"\";\r\n      position: absolute;\r\n      top: 0;\r\n      left: -100%;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: linear-gradient(\r\n        90deg,\r\n        transparent,\r\n        rgba(255, 255, 255, 0.3),\r\n        transparent\r\n      );\r\n      animation: shimmer 1.5s infinite;\r\n    }\r\n  }\r\n}\r\n\r\n@keyframes shimmer {\r\n  0% {\r\n    transform: translateX(-100%);\r\n  }\r\n  100% {\r\n    transform: translateX(100%);\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/por/cursor/xcx/freeyunpan/pages/movie/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","getMovieData","uni","onShareAppMessage","onShareTimeline","onMounted"],"mappings":";;;;;;AAyDA,UAAA,cAAAA,cAAA,IAAA,oBAAA,KAAA,CAAA;AACA,UAAA,WAAA,CAAA,KAAA,KAAA,KAAA,KAAA,KAAA,KAAA,GAAA;AAEA,UAAA,aAAAC,cAAA,SAAA,MAAA,YAAA,MAAA,QAAA,CAAA;AACA,UAAA,eAAAA,cAAA,SAAA,MAAA,YAAA,MAAA,SAAA,CAAA;AACA,UAAA,cAAAA,cAAA,SAAA,MAAA,SAAA,YAAA,MAAA,OAAA,CAAA,CAAA;AACA,UAAA,aAAAD,cAAAA,IAAA,IAAA;AACA,UAAA,YAAAA,cAAAA,IAAA,IAAA;AAGA,UAAA,iBAAA,YAAA;AACA,gBAAA,QAAA;AACA,UAAA;AACA,cAAA,OAAA,MAAAE,WAAAA;AACA,mBAAA,QAAA;AAAA,MACA,SAAA,OAAA;AACAC,sBAAA,MAAA,MAAA,SAAA,+BAAA,aAAA,KAAA;AACAA,sBAAAA,MAAA,UAAA;AAAA,UACA,OAAA;AAAA,UACA,MAAA;AAAA,QACA,CAAA;AAAA,MACA,UAAA;AACA,kBAAA,QAAA;AAAA,MACA;AAAA,IACA;AAGA,UAAA,WAAA,MAAA;AACAA,oBAAAA,MAAA,iBAAA;AAAA,QACA,MAAA;AAAA,QACA,SAAA,MAAA;AACAA,wBAAAA,MAAA,UAAA;AAAA,YACA,OAAA;AAAA,YACA,MAAA;AAAA,UACA,CAAA;AAAA,QACA;AAAA,MACA,CAAA;AAAA,IACA;AAGAC,kBAAAA,kBAAA,MAAA;;AACA,aAAA;AAAA,QACA,SAAA,gBAAA,UAAA,mBAAA,cAAA;AAAA,QACA,MAAA;AAAA,QACA,WAAA,gBAAA,UAAA,mBAAA;AAAA;AAAA,MACA;AAAA,IACA,CAAA;AAGAC,kBAAAA,gBAAA,MAAA;;AACA,aAAA;AAAA,QACA,SAAA,gBAAA,UAAA,mBAAA,cAAA;AAAA,QACA,OAAA;AAAA,QACA,WAAA,gBAAA,UAAA,mBAAA;AAAA,MACA;AAAA,IACA,CAAA;AAEAC,kBAAAA,UAAA,MAAA;AACA;IACA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnHA,GAAG,WAAW,eAAe;"}