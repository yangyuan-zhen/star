{"version":3,"file":"index.js","sources":["pages/weather/index.vue","../../../../360极速浏览器下载/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvd2VhdGhlci9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"weather-container\">\n    <view class=\"weather-header\">\n      <text class=\"title\">每日天气壁纸</text>\n      <text class=\"subtitle\">根据你所在的城市，每天推送精美的诗句和壁纸</text>\n    </view>\n\n    <view class=\"input-section\">\n      <input\n        v-model=\"cityName\"\n        type=\"text\"\n        placeholder=\"请输入你的城市名：如 北京、上海、成都\"\n        placeholder-class=\"placeholder-style\"\n        class=\"city-input\"\n        auto-focus\n        @focus=\"handleFocus\"\n        @blur=\"handleBlur\"\n        @confirm=\"getWeatherReport\"\n      />\n      <text class=\"required\">*</text>\n    </view>\n\n    <button @tap=\"getWeatherReport\" class=\"submit-btn\" :disabled=\"!cityName\">\n      确定\n    </button>\n\n    <!-- 结果展示 -->\n    <view v-if=\"weatherData\" class=\"result-section\">\n      <view class=\"share-card\" id=\"shareCard\">\n        <image :src=\"weatherData.img\" mode=\"widthFix\" class=\"bg-image\" />\n        <view class=\"info-section\">\n          <view class=\"poetry\">{{ weatherData.poetry }}</view>\n          <view class=\"city\">{{ weatherData.city }}</view>\n          <view class=\"date\"\n            >{{ weatherData.date }} {{ weatherData.condition }}</view\n          >\n          <view class=\"temperature\">\n            最高 {{ weatherData.temp_high }}°C 最低 {{ weatherData.temp_low }}°C\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { getWeatherReport } from \"@/api/search.js\";\n\nexport default {\n  data() {\n    return {\n      cityName: \"\",\n      weatherData: null,\n    };\n  },\n  methods: {\n    async getWeatherReport() {\n      if (!this.cityName) {\n        uni.showToast({\n          title: \"请输入城市名称\",\n          icon: \"none\",\n        });\n        return;\n      }\n\n      try {\n        uni.showLoading({\n          title: \"加载中...\",\n        });\n        const result = await getWeatherReport(this.cityName);\n        this.weatherData = result;\n      } catch (error) {\n        uni.showToast({\n          title: error.message || \"获取天气数据失败\",\n          icon: \"none\",\n        });\n      } finally {\n        uni.hideLoading();\n      }\n    },\n\n    handleFocus() {\n      // 输入框获取焦点时的处理\n      this.$refs.cityInput &&\n        (this.$refs.cityInput.style.borderColor = \"#409eff\");\n    },\n\n    handleBlur() {\n      // 输入框失去焦点时的处理\n      this.$refs.cityInput && (this.$refs.cityInput.style.borderColor = \"#eee\");\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.weather-container {\n  padding: 32rpx;\n}\n\n.weather-header {\n  text-align: center;\n  margin-bottom: 48rpx;\n\n  .title {\n    font-size: 40rpx;\n    font-weight: 500;\n    color: #333;\n    margin-bottom: 16rpx;\n    display: block;\n  }\n\n  .subtitle {\n    font-size: 28rpx;\n    color: #666;\n  }\n}\n\n.input-section {\n  position: relative;\n  margin-bottom: 24rpx;\n  background: #ffffff;\n  border-radius: 8rpx;\n  box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\n\n  .city-input {\n    width: 100%;\n    height: 88rpx;\n    background: #ffffff;\n    border: 2rpx solid #eee;\n    border-radius: 8rpx;\n    padding: 0 30rpx;\n    font-size: 28rpx;\n    box-sizing: border-box;\n    transition: all 0.3s ease;\n\n    &:focus {\n      border-color: #409eff;\n      box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2);\n    }\n  }\n\n  .placeholder-style {\n    color: #999;\n    font-size: 26rpx;\n  }\n\n  .required {\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    right: 12rpx;\n    color: #ff4d4f;\n  }\n}\n\n.submit-btn {\n  width: 100%;\n  height: 88rpx;\n  background: #5b6c8b;\n  color: #ffffff;\n  font-size: 32rpx;\n  border-radius: 8rpx;\n  border: none;\n  margin: 0;\n  padding: 0;\n  line-height: 88rpx;\n\n  &::after {\n    border: none;\n  }\n\n  &:disabled {\n    opacity: 0.6;\n  }\n}\n\n.result-section {\n  margin-top: 32rpx;\n}\n\n.share-card {\n  border-radius: 12rpx;\n  overflow: hidden;\n  background: #ffffff;\n\n  .bg-image {\n    width: 100%;\n    display: block;\n  }\n\n  .info-section {\n    padding: 32rpx;\n    text-align: center;\n\n    .poetry {\n      font-size: 28rpx;\n      color: #333;\n      line-height: 1.6;\n      margin-bottom: 24rpx;\n    }\n\n    .city {\n      font-size: 36rpx;\n      color: #333;\n      margin-bottom: 16rpx;\n    }\n\n    .date,\n    .temperature {\n      font-size: 24rpx;\n      color: #666;\n      margin-bottom: 8rpx;\n    }\n  }\n}\n</style>\n","import MiniProgramPage from 'D:/por/cursor/xcx/freeyunpan/pages/weather/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","getWeatherReport"],"mappings":";;;AAgDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,MACV,aAAa;AAAA;EAEhB;AAAA,EACD,SAAS;AAAA,IACP,MAAM,mBAAmB;AACvB,UAAI,CAAC,KAAK,UAAU;AAClBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD;AAAA,MACF;AAEA,UAAI;AACFA,sBAAAA,MAAI,YAAY;AAAA,UACd,OAAO;AAAA,QACT,CAAC;AACD,cAAM,SAAS,MAAMC,WAAAA,iBAAiB,KAAK,QAAQ;AACnD,aAAK,cAAc;AAAA,MACnB,SAAO,OAAO;AACdD,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,MAAM,WAAW;AAAA,UACxB,MAAM;AAAA,QACR,CAAC;AAAA,MACH,UAAU;AACRA,sBAAG,MAAC,YAAW;AAAA,MACjB;AAAA,IACD;AAAA,IAED,cAAc;AAEZ,WAAK,MAAM,cACR,KAAK,MAAM,UAAU,MAAM,cAAc;AAAA,IAC7C;AAAA,IAED,aAAa;AAEX,WAAK,MAAM,cAAc,KAAK,MAAM,UAAU,MAAM,cAAc;AAAA,IACnE;AAAA,EACF;AACH;;;;;;;;;;;;;;;;;;;;;;AC3FA,GAAG,WAAW,eAAe;"}