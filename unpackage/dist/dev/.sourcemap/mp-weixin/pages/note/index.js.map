{"version":3,"file":"index.js","sources":["pages/note/index.vue","../../../../360极速浏览器下载/HBuilderX.4.29.2024093009/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbm90ZS9pbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"note-container\">\r\n    <!-- 顶部标题 -->\r\n    <view class=\"header\">\r\n      <text class=\"title\">我的备忘录</text>\r\n      <text class=\"subtitle\">本周剩余可添加: {{ 5 - notes.length }}</text>\r\n      <text v-if=\"isMonday\" class=\"reminder info\">\r\n        新的一周开始啦，开始记录你的计划吧！\r\n      </text>\r\n      <text v-if=\"isFriday\" class=\"reminder warning\">\r\n        今天是周五，请检查本周待办事项是否已处理完毕\r\n      </text>\r\n      <text v-if=\"isSunday\" class=\"reminder danger\">\r\n        今天是周日，备忘录将在今晚清空\r\n      </text>\r\n    </view>\r\n\r\n    <!-- 备忘录列表 -->\r\n    <view class=\"notes-list\">\r\n      <view v-for=\"(note, index) in notes\" :key=\"index\" class=\"note-item\">\r\n        <view class=\"note-content\">\r\n          <text>{{ note.content }}</text>\r\n          <text class=\"note-date\">{{ note.date }}</text>\r\n        </view>\r\n        <view class=\"note-actions\">\r\n          <button @tap=\"editNote(index)\" class=\"btn edit\">编辑</button>\r\n          <button @tap=\"deleteNote(index)\" class=\"btn delete\">删除</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 添加按钮 -->\r\n    <button @tap=\"showAddModal\" class=\"add-btn\" :disabled=\"notes.length >= 5\">\r\n      添加备忘\r\n    </button>\r\n\r\n    <!-- 添加/编辑弹窗 -->\r\n    <view class=\"modal\" v-if=\"showModal\">\r\n      <view class=\"modal-content\">\r\n        <textarea\r\n          v-model=\"currentNote\"\r\n          placeholder=\"请输入备忘内容\"\r\n          class=\"note-input\"\r\n          :maxlength=\"1000\"\r\n          show-confirm-bar=\"false\"\r\n        />\r\n        <view class=\"word-count\">{{ currentNote.length }}/1000</view>\r\n        <view class=\"modal-btns\">\r\n          <button @tap=\"cancelEdit\" class=\"btn cancel\">取消</button>\r\n          <button @tap=\"saveNote\" class=\"btn save\">保存</button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\n\r\ninterface Note {\r\n  content: string;\r\n  date: string;\r\n}\r\n\r\nexport default defineComponent({\r\n  data() {\r\n    return {\r\n      notes: [] as Note[],\r\n      showModal: false,\r\n      currentNote: \"\",\r\n      editIndex: -1,\r\n      isMonday: false,\r\n      isFriday: false,\r\n      isSunday: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.loadNotes();\r\n    this.checkWeekday();\r\n    if (this.isSunday) {\r\n      this.checkAndClearNotes();\r\n    }\r\n  },\r\n  methods: {\r\n    loadNotes(): void {\r\n      const savedNotes = uni.getStorageSync(\"notes\") || [];\r\n      this.notes = savedNotes;\r\n    },\r\n    showAddModal(): void {\r\n      if (this.notes.length >= 5) {\r\n        uni.showToast({\r\n          title: \"本周已达到添加上限，请处理一些事项哦\",\r\n          icon: \"none\",\r\n        });\r\n        return;\r\n      }\r\n      this.showModal = true;\r\n      this.currentNote = \"\";\r\n      this.editIndex = -1;\r\n    },\r\n    editNote(index: number): void {\r\n      this.showModal = true;\r\n      this.currentNote = this.notes[index].content;\r\n      this.editIndex = index;\r\n    },\r\n    deleteNote(index: number): void {\r\n      uni.showModal({\r\n        title: \"确认删除\",\r\n        content: \"是否确认删除该备忘？\",\r\n        success: (res) => {\r\n          if (res.confirm) {\r\n            this.notes.splice(index, 1);\r\n            this.saveToStorage();\r\n          }\r\n        },\r\n      });\r\n    },\r\n    saveNote(): void {\r\n      if (!this.currentNote.trim()) {\r\n        uni.showToast({\r\n          title: \"内容不能为空\",\r\n          icon: \"none\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      const noteObj: Note = {\r\n        content: this.currentNote,\r\n        date: new Date().toLocaleDateString(),\r\n      };\r\n\r\n      if (this.editIndex === -1) {\r\n        this.notes.push(noteObj);\r\n      } else {\r\n        this.notes[this.editIndex] = noteObj;\r\n      }\r\n\r\n      this.saveToStorage();\r\n      this.showModal = false;\r\n    },\r\n    cancelEdit(): void {\r\n      this.showModal = false;\r\n    },\r\n    saveToStorage(): void {\r\n      uni.setStorageSync(\"notes\", this.notes);\r\n    },\r\n    checkWeekday(): void {\r\n      const today = new Date();\r\n      this.isMonday = today.getDay() === 1;\r\n      this.isFriday = today.getDay() === 5;\r\n      this.isSunday = today.getDay() === 0;\r\n    },\r\n    checkAndClearNotes(): void {\r\n      const lastClearDate = uni.getStorageSync(\"lastClearDate\");\r\n      const today = new Date().toDateString();\r\n\r\n      if (lastClearDate !== today) {\r\n        this.notes = [];\r\n        this.saveToStorage();\r\n        uni.setStorageSync(\"lastClearDate\", today);\r\n      }\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/styles/variables.scss\";\r\n\r\n.note-container {\r\n  padding: $uni-spacing-base;\r\n  background: $uni-color-bg;\r\n  min-height: 100vh;\r\n  box-sizing: border-box;\r\n  padding-bottom: calc(\r\n    100rpx + env(safe-area-inset-bottom) + #{$uni-spacing-xl}\r\n  );\r\n}\r\n\r\n.header {\r\n  padding: $uni-spacing-lg $uni-spacing-base;\r\n  background: $uni-color-white;\r\n  margin-bottom: $uni-spacing-lg;\r\n  border-radius: $uni-radius-lg;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\r\n\r\n  .title {\r\n    font-size: $uni-font-size-xl;\r\n    font-weight: 600;\r\n    color: $uni-color-text;\r\n    margin-bottom: $uni-spacing-xs;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .subtitle {\r\n    font-size: $uni-font-size-base;\r\n    color: $uni-color-text-secondary;\r\n    background: $uni-color-bg;\r\n    padding: $uni-spacing-xs $uni-spacing-sm;\r\n    border-radius: $uni-radius-sm;\r\n    display: inline-block;\r\n  }\r\n\r\n  .reminder {\r\n    display: block;\r\n    margin-top: $uni-spacing-sm;\r\n    padding: $uni-spacing-xs $uni-spacing-sm;\r\n    border-radius: $uni-radius-sm;\r\n    font-size: $uni-font-size-sm;\r\n\r\n    &.warning {\r\n      background: #fff3cd;\r\n      color: #856404;\r\n      border: 1px solid #ffeeba;\r\n    }\r\n\r\n    &.danger {\r\n      background: #f8d7da;\r\n      color: #721c24;\r\n      border: 1px solid #f5c6cb;\r\n    }\r\n\r\n    &.info {\r\n      background: #d1ecf1;\r\n      color: #0c5460;\r\n      border: 1px solid #bee5eb;\r\n    }\r\n  }\r\n}\r\n\r\n.notes-list {\r\n  margin-bottom: $uni-spacing-lg;\r\n}\r\n\r\n.note-item {\r\n  background: $uni-color-white;\r\n  border-radius: $uni-radius-lg;\r\n  padding: $uni-spacing-lg;\r\n  margin: $uni-spacing-sm $uni-spacing-base;\r\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n\r\n  .note-content {\r\n    font-size: $uni-font-size-base;\r\n    color: $uni-color-text;\r\n    margin-bottom: $uni-spacing-sm;\r\n    line-height: 1.4;\r\n\r\n    .note-date {\r\n      font-size: $uni-font-size-sm;\r\n      color: $uni-color-text-secondary;\r\n      margin-top: $uni-spacing-xs;\r\n      display: block;\r\n    }\r\n  }\r\n\r\n  .note-actions {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: $uni-spacing-sm;\r\n    margin-top: $uni-spacing-base;\r\n  }\r\n}\r\n\r\n.btn {\r\n  padding: $uni-spacing-xs $uni-spacing-lg;\r\n  border-radius: $uni-radius-base;\r\n  font-size: $uni-font-size-base;\r\n  border: none;\r\n  font-weight: 500;\r\n\r\n  &.edit {\r\n    background: $uni-color-success;\r\n    color: $uni-color-white;\r\n  }\r\n\r\n  &.delete {\r\n    background: $uni-color-error;\r\n    color: $uni-color-white;\r\n  }\r\n\r\n  &.cancel {\r\n    background: $uni-color-bg;\r\n    color: $uni-color-text-secondary;\r\n  }\r\n\r\n  &.save {\r\n    background: $uni-color-primary;\r\n    color: $uni-color-white;\r\n  }\r\n}\r\n\r\n.add-btn {\r\n  // 移除 position: fixed 相关样式\r\n  margin: $uni-spacing-lg auto; // 改用上下外边距\r\n  width: 140px; // 设置固定宽度\r\n  background: $uni-color-primary;\r\n  color: $uni-color-white;\r\n  padding: $uni-spacing-sm $uni-spacing-lg; // 减小内边距\r\n  border-radius: $uni-radius-base;\r\n  font-size: $uni-font-size-base; // 减小字体大小\r\n  font-weight: 500;\r\n  text-align: center;\r\n  box-shadow: 0 2px 8px rgba($uni-color-primary, 0.2); // 减小阴影\r\n\r\n  &:disabled {\r\n    background: $uni-color-disabled;\r\n    opacity: 0.8;\r\n    box-shadow: none;\r\n  }\r\n}\r\n\r\n.modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba($uni-color-text, 0.4);\r\n  z-index: 999;\r\n\r\n  .modal-content {\r\n    position: fixed;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n    background: $uni-color-white;\r\n    width: 90%;\r\n    padding: $uni-spacing-lg;\r\n    border-radius: $uni-radius-lg;\r\n  }\r\n\r\n  .note-input {\r\n    width: calc(100% - 2px);\r\n    height: 200px;\r\n    border: 1px solid $uni-color-border;\r\n    border-radius: $uni-radius-base;\r\n    padding: $uni-spacing-base;\r\n    margin-bottom: $uni-spacing-xs;\r\n    font-size: $uni-font-size-base;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .word-count {\r\n    text-align: right;\r\n    font-size: $uni-font-size-sm;\r\n    color: $uni-color-text-secondary;\r\n    margin-bottom: $uni-spacing-base;\r\n    padding-right: $uni-spacing-xs;\r\n  }\r\n\r\n  .modal-btns {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: $uni-spacing-base;\r\n    padding: 0 $uni-spacing-xs;\r\n\r\n    .btn {\r\n      min-width: 80px;\r\n      padding: $uni-spacing-xs $uni-spacing-lg;\r\n    }\r\n  }\r\n}\r\n\r\n.note-item {\r\n  .note-content {\r\n    white-space: pre-wrap;\r\n    word-wrap: break-word;\r\n    line-height: 1.6;\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/por/cursor/xcx/freeyunpan/pages/note/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;AAgEA,MAAA,YAAeA,8BAAgB;AAAA,EAC7B,OAAO;AACE,WAAA;AAAA,MACL,OAAO,CAAC;AAAA,MACR,WAAW;AAAA,MACX,aAAa;AAAA,MACb,WAAW;AAAA,MACX,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,IAAA;AAAA,EAEd;AAAA,EACA,UAAU;AACR,SAAK,UAAU;AACf,SAAK,aAAa;AAClB,QAAI,KAAK,UAAU;AACjB,WAAK,mBAAmB;AAAA,IAC1B;AAAA,EACF;AAAA,EACA,SAAS;AAAA,IACP,YAAkB;AAChB,YAAM,aAAaC,cAAA,MAAI,eAAe,OAAO,KAAK,CAAA;AAClD,WAAK,QAAQ;AAAA,IACf;AAAA,IACA,eAAqB;AACf,UAAA,KAAK,MAAM,UAAU,GAAG;AAC1BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MACF;AACA,WAAK,YAAY;AACjB,WAAK,cAAc;AACnB,WAAK,YAAY;AAAA,IACnB;AAAA,IACA,SAAS,OAAqB;AAC5B,WAAK,YAAY;AACjB,WAAK,cAAc,KAAK,MAAM,KAAK,EAAE;AACrC,WAAK,YAAY;AAAA,IACnB;AAAA,IACA,WAAW,OAAqB;AAC9BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACV,iBAAA,MAAM,OAAO,OAAO,CAAC;AAC1B,iBAAK,cAAc;AAAA,UACrB;AAAA,QACF;AAAA,MAAA,CACD;AAAA,IACH;AAAA,IACA,WAAiB;AACf,UAAI,CAAC,KAAK,YAAY,QAAQ;AAC5BA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACP;AACD;AAAA,MACF;AAEA,YAAM,UAAgB;AAAA,QACpB,SAAS,KAAK;AAAA,QACd,OAAM,oBAAI,KAAK,GAAE,mBAAmB;AAAA,MAAA;AAGlC,UAAA,KAAK,cAAc,IAAI;AACpB,aAAA,MAAM,KAAK,OAAO;AAAA,MAAA,OAClB;AACA,aAAA,MAAM,KAAK,SAAS,IAAI;AAAA,MAC/B;AAEA,WAAK,cAAc;AACnB,WAAK,YAAY;AAAA,IACnB;AAAA,IACA,aAAmB;AACjB,WAAK,YAAY;AAAA,IACnB;AAAA,IACA,gBAAsB;AAChBA,oBAAAA,MAAA,eAAe,SAAS,KAAK,KAAK;AAAA,IACxC;AAAA,IACA,eAAqB;AACb,YAAA,4BAAY;AACb,WAAA,WAAW,MAAM,OAAA,MAAa;AAC9B,WAAA,WAAW,MAAM,OAAA,MAAa;AAC9B,WAAA,WAAW,MAAM,OAAA,MAAa;AAAA,IACrC;AAAA,IACA,qBAA2B;AACnB,YAAA,gBAAgBA,cAAAA,MAAI,eAAe,eAAe;AACxD,YAAM,SAAQ,oBAAI,KAAK,GAAE,aAAa;AAEtC,UAAI,kBAAkB,OAAO;AAC3B,aAAK,QAAQ;AACb,aAAK,cAAc;AACfA,sBAAAA,MAAA,eAAe,iBAAiB,KAAK;AAAA,MAC3C;AAAA,IACF;AAAA,EACF;AACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClKD,GAAG,WAAW,eAAe;"}