<template>
  <view class="fortune-detail-section">
    <text class="section-title">è¯¦ç»†è¿åŠ¿</text>
    <view class="fortune-cards">
      <!-- çˆ±æƒ…è¿åŠ¿ -->
      <view class="fortune-card">
        <view class="card-header">
          <text class="card-icon love-icon">â™¥</text>
          <text class="card-title">çˆ±æƒ…è¿åŠ¿</text>
        </view>
        <view class="star-rating small">
          {{ getStarRating(fortune?.love?.rating || 4) }}
        </view>
        <text class="card-description">
          {{
            fortune?.love?.description ||
            "ä»Šå¤©æ˜¯å¢è¿›æ„Ÿæƒ…çš„å¥½æ—¶æœºï¼Œå•èº«è€…å¯èƒ½ä¼šé‡åˆ°æœ‰è¶£çš„äººï¼Œå·²æœ‰ä¼´ä¾£çš„äººå¯ä»¥è®¡åˆ’ä¸€æ¬¡çº¦ä¼šï¼ŒåŠ æ·±å½¼æ­¤äº†è§£ã€‚"
          }}
        </text>
      </view>

      <!-- äº‹ä¸šè¿åŠ¿ -->
      <view class="fortune-card">
        <view class="card-header">
          <text class="card-icon career-icon">ğŸ’¼</text>
          <text class="card-title">äº‹ä¸šè¿åŠ¿</text>
        </view>
        <view class="star-rating small">
          {{ getStarRating(fortune?.career?.rating || 3) }}
        </view>
        <text class="card-description">
          {{
            fortune?.career?.description ||
            "å·¥ä½œä¸­å¯èƒ½ä¼šé¢ä¸´æŒ‘æˆ˜ï¼Œä½†ä½ çš„è§£å†³é—®é¢˜èƒ½åŠ›å¾ˆå¼ºã€‚å»ºè®®å¤šä¸åŒäº‹æ²Ÿé€šï¼Œå›¢é˜Ÿåˆä½œå°†å¸®åŠ©ä½ åº¦è¿‡éš¾å…³ã€‚"
          }}
        </text>
      </view>

      <!-- è´¢è¿åˆ†æ -->
      <view class="fortune-card">
        <view class="card-header">
          <text class="card-icon wealth-icon">ğŸ’°</text>
          <text class="card-title">è´¢è¿åˆ†æ</text>
        </view>
        <view class="star-rating small">
          {{ getStarRating(fortune?.wealth?.rating || 4) }}
        </view>
        <text class="card-description">
          {{
            fortune?.wealth?.description ||
            "è´¢è¿ä¸é”™ï¼Œä½†è¦é¿å…å†²åŠ¨æ¶ˆè´¹ã€‚é€‚åˆåšé•¿æœŸç†è´¢è®¡åˆ’ï¼ŒæŠ•èµ„å†³ç­–éœ€è°¨æ…ï¼Œå¯å‘ä¸“ä¸šäººå£«å’¨è¯¢ã€‚"
          }}
        </text>
      </view>

      <!-- å¥åº·è¿åŠ¿ -->
      <view class="fortune-card">
        <view class="card-header">
          <text class="card-icon health-icon">â¤ï¸</text>
          <text class="card-title">å¥åº·è¿åŠ¿</text>
        </view>
        <view class="star-rating small">
          {{ getStarRating(fortune?.health?.rating || 5) }}
        </view>
        <text class="card-description">
          {{
            fortune?.health?.description ||
            "èº«ä½“çŠ¶å†µè‰¯å¥½ï¼Œä½†æ³¨æ„ä¸è¦è¿‡åº¦åŠ³ç´¯ã€‚å»ºè®®å¤šå–æ°´ï¼Œé€‚é‡è¿åŠ¨ï¼Œä¿æŒè‰¯å¥½çš„ä½œæ¯ä¹ æƒ¯æœ‰åŠ©äºæé«˜å…ç–«åŠ›ã€‚"
          }}
        </text>
      </view>
    </view>
  </view>
</template>

<script setup>
defineProps({
  fortune: { type: Object, default: () => ({}) },
});

// æ˜Ÿçº§è¯„åˆ†ç”Ÿæˆå‡½æ•°
const getStarRating = (rating = 0, maxRating = 5) => {
  const validRating = Math.min(Math.max(Math.round(rating || 0), 0), maxRating);
  const fullStars = "â˜…".repeat(validRating);
  const emptyStars = "â˜†".repeat(maxRating - validRating);
  return fullStars + emptyStars;
};
</script>

<style lang="scss">
.section-title {
  font-size: 32rpx;
  font-weight: bold;
  color: #333;
  margin-bottom: 20rpx;
  display: block;
}

.fortune-detail-section {
  margin-bottom: 40rpx;
}

.fortune-cards {
  display: flex;
  flex-direction: column;
  gap: 20rpx;
}

.fortune-card {
  background-color: #fff;
  border-radius: 20rpx;
  padding: 30rpx;
  margin: 0 4rpx;
  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);
  transition: transform 0.3s ease;
  width: calc(100% - 8rpx);
  box-sizing: border-box;

  &:active {
    transform: translateY(-5rpx);
  }

  .card-header {
    display: flex;
    align-items: center;
    margin-bottom: 12rpx;

    .card-icon {
      width: 50rpx;
      height: 50rpx;
      border-radius: 50%;
      font-size: 28rpx;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 12rpx;

      &.love-icon {
        background-color: #fee2e2;
        color: #ef4444;
      }

      &.career-icon {
        background-color: #dbeafe;
        color: #3b82f6;
      }

      &.wealth-icon {
        background-color: #fef3c7;
        color: #f59e0b;
      }

      &.health-icon {
        background-color: #dcfce7;
        color: #22c55e;
      }
    }

    .card-title {
      font-size: 28rpx;
      font-weight: bold;
      color: #333;
    }
  }

  .card-description {
    font-size: 26rpx;
    color: #666;
    line-height: 1.6;
    margin-top: 12rpx;
    padding-right: 10rpx;
  }
}

.star-rating {
  color: #f59e0b;
  font-size: 36rpx;
  line-height: 1;

  &.small {
    font-size: 30rpx;
  }
}
</style>
